# 🛠️ 開発者向け情報

本ドキュメントでは、**カジ活** プロジェクトの開発環境をスムーズに構築し、効率よく開発を進めるための開発者向け情報を掲載しています。

---

## 目次

- [環境セットアップ](#環境セットアップ)
- [技術選定について](#技術選定について)
- [テーブルの追加更新について](#テーブルの追加更新について)
- [Next.jsアプリケーションにおけるアンチパターン](#Next.jsアプリケーションにおけるアンチパターン)
- [依存パッケージの解説](#依存パッケージの解説)
- [スクリプトコマンドの説明](#スクリプトコマンドの説明)
- [開発ルール・ベストプラクティス](#開発ルール・ベストプラクティス)

---

## 📌 環境セットアップ

| 項目                         | コマンド                                                       |
| ---------------------------- | -------------------------------------------------------------- |
| 依存パッケージのインストール | `npm install`                                                  |
| 開発サーバーの起動           | `npm run dev` → [http://localhost:3000](http://localhost:3000) |
| Supabase のローカル環境起動  | `npx supabase start`                                           |

---

## 🏗️ 技術選定について

追記予定...

---

## 🛢️ テーブルの追加更新について

| 操作                     | コマンド例                             |
| ------------------------ | -------------------------------------- |
| データベースの変更を記録 | `supabase db diff --file [ファイル名]` |
| 例                       | `supabase db diff --file local_schema` |

---

## ⚠️ Next.jsアプリケーションにおけるアンチパターン

| アンチパターン                     | 説明                                                         | 回避策                                 |
| ---------------------------------- | ------------------------------------------------------------ | -------------------------------------- |
| **全情報の返却**                   | ユーザー情報の不要な項目まで返すと、情報漏洩のリスクが高まる | 必要な情報のみを返却する               |
| **グローバルステートの乱用**       | すべてのデータをグローバルで管理すると、状態管理が複雑化     | コンテキストAPIや適切なスコープで管理  |
| **直接的なDOM操作**                | 仮想DOMを無視して直接操作すると、バグの原因に                | React の `useState` や `useRef` を活用 |
| **大規模なコンポーネント**         | 1つのコンポーネントが大きくなると、再利用性が低下            | 小さなコンポーネントに分割する         |
| **ハードコーディングされた設定値** | 設定が変更しづらく、環境ごとの管理が難しくなる               | 環境変数 (`.env`) を使用               |

---

## 📦 依存パッケージの解説

| パッケージ名              | バージョン | 用途                               |
| ------------------------- | ---------- | ---------------------------------- |
| **next**                  | 15.1.7     | Next.js フレームワーク             |
| **react**                 | 19.0.0     | UI ライブラリ                      |
| **react-dom**             | 19.0.0     | DOM 操作用                         |
| **tailwindcss**           | 3.4.14     | CSS フレームワーク                 |
| **@reduxjs/toolkit**      | 2.5.0      | Redux 状態管理ツール               |
| **@supabase/supabase-js** | 2.45.5     | Supabase API クライアント          |
| **swr**                   | 2.3.2      | データフェッチングとキャッシュ管理 |
| **zod**                   | 3.24.1     | スキーマ定義・バリデーション       |

> **注**: その他の開発ツール（ESLint、Prettier、Husky など）は `devDependencies` に記載。

---

## 🚀 スクリプトコマンドの説明

| コマンド              | 説明                                                                |
| --------------------- | ------------------------------------------------------------------- |
| `npm run dev`         | 開発サーバーを起動 ([http://localhost:3000](http://localhost:3000)) |
| `npm run build`       | 本番環境向けにアプリをビルド                                        |
| `npm run start`       | 本番環境でアプリを実行                                              |
| `npm run lint`        | ESLint を実行し、コードの静的解析                                   |
| `npm run supabase`    | ローカルで Supabase を起動                                          |
| `npm run secretlint`  | 秘密情報が含まれていないかチェック                                  |
| `npm run check-types` | TypeScript の型チェック                                             |
| `npm run prepare`     | Husky をセットアップ（Git コミット前のフックを有効化）              |
| `npm run migrate`     | Supabase のスキーマ変更を出力 (`supabase db diff`)                  |

---

## 📌 開発ルール・ベストプラクティス

| 項目                   | ルール                                                            |
| ---------------------- | ----------------------------------------------------------------- |
| **コンポーネント設計** | 1つのコンポーネントが **1つの責務を持つ**                         |
|                        | 再利用可能な UI コンポーネントは `components/ui/` に配置          |
|                        | ビジネスロジックを含むコンポーネントは `features/` に分離         |
| **状態管理**           | グローバルな状態は `Redux` または `Context API` を利用            |
|                        | ローカルな状態は `useState` を使用                                |
| **データフェッチ**     | **SWR** を活用し、データをキャッシュする                          |
|                        | クライアント側で取得する場合は `useEffect` より `useSWR` を推奨   |
| **環境変数の管理**     | `.env.local` にローカル環境用の変数を保存                         |
|                        | `.env.production` など、本番用の設定も明確に分ける                |
| **コード品質**         | **コミット前に `npm run lint` でコードチェック**                  |
|                        | **コードフォーマットは `Prettier` に従う**                        |
|                        | **Git フック (`husky`) を活用して、CI/CD の品質チェックを自動化** |

---

## 🔗 参考資料

| 資料                          | リンク                                                       |
| ----------------------------- | ------------------------------------------------------------ |
| Next.js 公式ドキュメント      | [https://nextjs.org/docs](https://nextjs.org/docs)           |
| Supabase 公式ドキュメント     | [https://supabase.com/docs](https://supabase.com/docs)       |
| Tailwind CSS 公式ドキュメント | [https://tailwindcss.com/docs](https://tailwindcss.com/docs) |

---

以上が **カジ活プロジェクトの開発環境に関する情報** です。  
不明点があれば、開発メンバー間で共有・相談してください！🚀
